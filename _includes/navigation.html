
<div class="hidden lg:flex lg:gap-x-12">
  {% for item in site.data.header-navigation.main %}
    {% assign sub_items = "" %}
    {% if item.url == '/services' %}
      {% assign sub_items = site.services | sort: 'order' %}
      {% assign sub_sub_items = site['sub-services'] | sort: 'order' %}
    {% elsif item.url == '/industries' %}
      {% assign sub_items = site.industries | sort: 'order' %}
      {% assign sub_sub_items = site['sub-industries'] | sort: 'order' %}
    {% elsif item.sub %}
      {% assign sub_items = item.sub %}
    {% endif %}
    {% if sub_items != '' %}
    <button type="button" class="flex items-center gap-x-1" aria-expanded="false">
      <span>{{ item.title }}</span>
      <i class="fa-solid fa-angle-down"></i>
    </button>
    <div class="absolute -left-8 top-full z-10 mt-3 w-screen max-w-md overflow-hidden rounded-3xl bg-white shadow-lg ring-1 ring-gray-900/5">
      <div class="submenu-content group-hover:block">
          {% for sub in sub_items %}
            <a href="{{ sub.url | relative_url }}">
              <h4>{{ sub.title }}</h4>
              <ul>
                {% assign nested_items = "" %}
                {% if item.url == '/services' %}
                  {% assign nested_items = sub_sub_items | where: "parent", sub.title %}
                {% elsif item.url == '/industries' %}
                  {% assign nested_items = sub_sub_items | where: "parent", sub.title %}
                {% endif %}
                {% for nested in nested_items %}
                  <li>
                      {{ nested.title }}
                  </li>
                {% endfor %}
              </ul>
            </a>
          {% endfor %}
          </div>
        </div>
    {% else %}
    <a class="flex items-center gap-x-1" href="{{ item.url }}">{{ item.title }}</a>
    {% endif %}
  {% endfor %}
</div>